<% layout('layouts/managerboilerplate') %>
<% pageName = 'allHotel' %>
<body>
    <!-- Navigation -->
   
    
  <!-- Alternative 4: Split Info Panel -->
  <div class="hero-container">
    <!-- <div class="hero-title">Alternative 4: Split Info Panel</div> -->
    <br><br><br>
    <section class="hero-4">
        <div class="container">
            <div class="main-content">
                <div class="status-indicator">
                    <!-- <div class="status-dot"></div> -->
                    <span class="status-text" style="
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 20px;
                    padding: 5px;
                    backdrop-filter: blur(20px);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);"> Hotel Control Center </span>
                </div>
                <h1>Hello, <%= manager ? manager.username : 'Guest' %> — good to see you again!</h1>

                <p class="subtitle">
                    Efficiently manage hotel operations with a comprehensive management system. Begin by setting up a new hotel profile or managing an existing property.
                </p>
            </div>
            <div class="info-panel">
                <div class="panel-header">
                    <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2-2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                    Quick Overview
                </div>
                <div class="info-grid">
                    <div class="info-row">
                        <span class="info-label">Hotels Managed</span>
                        <span class="info-value" style="color: rgb(57, 255, 57);"><%= hotelCount %></span>
                    </div>
                    <!-- <div class="info-row">
                        <span class="info-label">Staff Members</span>
                        <span class="info-value">24</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Current Rating</span>
                        <span class="info-value highlight">4.8 ★</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Occupancy Rate</span>
                        <span class="info-value highlight">98%</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Last Login</span>
                        <span class="info-value">Today, 9:15 AM</span>
                    </div> -->
                </div>
                
                <div style="padding: 20px; border-top: 1px solid #e5e7eb;">
                    <h3 style="color:white;"><i class="fas fa-lightbulb me-2"></i>Getting Started</h3>
                  <br> <div class="guidance-steps">
                        <div class="step-item completed">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h5>Account Setup</h5>
                                <p>Complete your manager profile</p>
                            </div>
                            <i class="fas fa-check step-check"></i>
                        </div>
                        <div class="step-item active">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h5>Hotel Registration</h5>
                                <p>Add your hotel details</p>
                            </div>
                        </div>
                        <div class="step-item">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h5>Staff Management</h5>
                                <p>Add and manage your team</p>
                            </div>
                        </div>
                    </div>
                </div>
             </div>
        </div>
    </section>
</div>

    <!-- Manager's Hotel Section -->
    <section class="hotel-management-section py-5">
        <div class="container">
            <!-- Section Header -->
            <div class="section-header text-center mb-5 fade-in-up">
                <div class="section-badge">
                    <i class="fas fa-building me-2"></i>
                    Your Hotel
                </div>
                <h2 class="section-title">Hotel Management</h2>
                <p class="section-description">Manage your hotel property and oversee all operations from this central dashboard</p>
            </div>

            <!-- Hotel Card or Add Hotel -->
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <!-- Manager's Hotel Card -->
                <% if (hotels.length > 0) { %>

                    <% hotels.forEach((hotel, index) => { %>

                      <div class="manager-hotel-card fade-in-up" id="hotelCard">
                        <div class="hotel-header">
                            <img src="<%= hotelImages[index % hotelImages.length] %>" alt="<%= hotel.name %>" class="hotel-image">
                            <div class="hotel-overlay">
                                <div class="hotel-status-badge active">
                                    <i class="fas fa-circle me-1"></i>Active
                                </div>
                            </div>
                        </div>
                        
                        <div class="hotel-content">
                            <div class="hotel-main-info">
                                <h3 class="hotel-name">
                                  <a href="/hotel/<%= hotel._id %>" style="text-decoration:none; color:black;">
                                    <%= hotel.name %></h3>
                                  </a>
                                <div class="hotel-location">
                                    <i class="fas fa-map-marker-alt me-2"></i>
                                    <span><%= hotel.locationID.address %>, <%= hotel.locationID.city %>,  <%= hotel.locationID.state %></span>
                                </div>
                                <!-- <div class="hotel-rating">
                                    <div class="rating-stars">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <span class="rating-text">4.8 (156 reviews)</span>
                                </div> -->
                            </div>

                            <!-- <div class="hotel-metrics"> -->
                                <!-- <div class="metric-item">
                                    <div class="metric-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div class="metric-details">
                                        <div class="metric-value">24</div>
                                        <div class="metric-label">Staff Members</div>
                                    </div>
                                </div> -->
                                <!-- <div class="metric-item">
                                    <div class="metric-icon">
                                        <i class="fas fa-dollar-sign"></i>
                                    </div>
                                    <div class="metric-details">
                                        <div class="metric-value">$12,450</div>
                                        <div class="metric-label">Monthly Tips</div>
                                    </div>
                                </div> -->
                                <!-- <div class="metric-item">
                                    <div class="metric-icon">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="metric-details">
                                        <div class="metric-value">98%</div>
                                        <div class="metric-label">Satisfaction</div>
                                    </div>
                                </div> -->
                                <!-- <div class="metric-item">
                                    <div class="metric-icon">
                                        <i class="fas fa-calendar-check"></i>
                                    </div>
                                    <div class="metric-details">
                                        <div class="metric-value">95%</div>
                                        <div class="metric-label">Attendance</div>
                                    </div>
                                </div> -->
                            <!-- </div> -->

                            <div class="hotel-actions">
                              <a href="/hotel/<%= hotel._id %>" style="text-decoration:none;">
                                <button class="action-btn primary" onclick="viewHotelDetails()">
                                    <i class="fas fa-eye me-2"></i>View Details
                                </button>
                              </a>

                              <a href="/hotel/<%= hotel._id %>#staff-section"  style="text-decoration:none; ">
                                <button class="action-btn secondary" onclick="manageStaff()">
                                    <i class="fas fa-users me-2"></i>Manage Staff
                                </button>
                              </a>

                                <a href="/hotel/<%= hotel._id %>/edit"  style="text-decoration:none; ">
                                  <button class="action-btn warning" onclick="editHotel()">
                                    <i class="fas fa-edit me-2"></i>Edit Hotel
                                  </button>
                                </a>

                                <form action="/hotel/<%= hotel._id %>?_method=DELETE" method="POST">
                                  <button class="action-btn info" onclick="viewAnalytics()" type="submit">
                                    <i class="fas fa-trash me-2"></i>Delete Hotel
                                  </button>
                                </form>

                               
                            </div>
                        </div>
                    </div>
<br><br>

    <% }) %>
    <% } else { %>
        <!-- If no hotels exist -->
        <div class="no-hotel-container text-center">
          <i class="fas fa-plus-circle" style="font-size: 3rem; color: #2c5aa0; cursor: pointer;" onclick="window.location.href='/hotel/newHotel'"></i>
          <p style="margin-top: 10px; font-size: 1.2rem;">No hotels found. Click the icon above to add a new hotel.</p>
        </div>
      <% } %>   

                    <!-- Add Hotel Card (Hidden by default, shown when no hotel exists) -->
                    <div class="add-hotel-card fade-in-up" id="addHotelCard" style="display: none;">
                        <div class="add-hotel-content">
                            <div class="add-hotel-icon">
                                <i class="fas fa-plus-circle"></i>
                            </div>
                            <h3>Register Your Hotel</h3>
                            <p>Start managing your hotel by adding your property details. This will enable you to manage staff, track tips, and monitor performance.</p>
                            <button class="btn btn-primary btn-lg" onclick="openAddHotelModal()">
                                <i class="fas fa-hotel me-2"></i>Add Your Hotel
                            </button>
                        </div>
                        <div class="add-hotel-features">
                            <div class="feature-item">
                                <i class="fas fa-check-circle"></i>
                                <span>Staff Management</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-check-circle"></i>
                                <span>Tip Distribution</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-check-circle"></i>
                                <span>Performance Analytics</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-check-circle"></i>
                                <span>QR Code Generation</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

  

    <!-- Add Hotel Modal -->
    <div class="modal fade" id="addHotelModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-hotel me-2"></i>Register Your Hotel
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="hotelForm" class="needs-validation" novalidate>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="hotelName" required>
                                    <label for="hotelName">Hotel Name</label>
                                    <div class="invalid-feedback">Please provide a hotel name.</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="hotelAddress" required>
                                    <label for="hotelAddress">Address</label>
                                    <div class="invalid-feedback">Please provide an address.</div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="hotelCity" required>
                                    <label for="hotelCity">City</label>
                                    <div class="invalid-feedback">Please provide a city.</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="hotelState" required>
                                    <label for="hotelState">State</label>
                                    <div class="invalid-feedback">Please provide a state.</div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="hotelZip" required>
                                    <label for="hotelZip">Zip Code</label>
                                    <div class="invalid-feedback">Please provide a zip code.</div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="number" class="form-control" id="hotelLat" step="any" required>
                                    <label for="hotelLat">Latitude</label>
                                    <div class="invalid-feedback">Please provide latitude.</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="number" class="form-control" id="hotelLng" step="any" required>
                                    <label for="hotelLng">Longitude</label>
                                    <div class="invalid-feedback">Please provide longitude.</div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="hotelImage" class="form-label">Hotel Image</label>
                            <input type="file" class="form-control" id="hotelImage" accept="image/*">
                        </div>
                        <div class="mb-3">
                            <div class="form-floating">
                                <textarea class="form-control" id="hotelDescription" style="height: 100px"></textarea>
                                <label for="hotelDescription">Hotel Description (Optional)</label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="registerHotel()">
                        <i class="fas fa-save me-2"></i>Register Hotel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
   

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="/js/allHotel.js"></script>
</body>
</html>